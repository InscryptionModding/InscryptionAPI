<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Opponents | InscryptionAPI </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Opponents | InscryptionAPI ">
    <meta name="generator" content="docfx 2.59.0.0">
    
    <link rel="shortcut icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    <meta property="docfx:newtab" content="true">
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo.svg" alt="Inscryption Modding API">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="opponents">Opponents</h2>

<hr>
<p>In the context of this API, think of opponents as basically just bosses. There is a enumeration of Opponents called Opponent.Type that refers to the opponent. This name can be confusing in some IDEs, as they may simply show the parameter type as Type, which should not be confused with the System.Type type.</p>
<p>Like everything else, Opponents are classes that you have to write that are responsible for handling the weird things that happen during battle. Depending upon which type of opponent you are buiding, you will need to use one of the following base classes:</p>
<ul>
<li><strong>Opponent</strong>: The base class for all Opponents. You should probably never inherit from this one directly.</li>
<li><strong>Part1Opponent</strong>: Used for battles in Leshy&#39;s cabin</li>
<li><strong>Part1BossOpponent</strong>: Used for boss battles in Leshy&#39;s cabin</li>
<li><strong>PixelOpponent</strong>: Used for battles in the GBC game</li>
<li><strong>PixelBossOpponent</strong>: Used for boss battles in the GBC game</li>
<li><strong>Part3Opponent</strong>: Used for battles in Botopia</li>
<li><strong>Part3BossOpponent</strong>: Used for boss battles in Botopia</li>
</ul>
<p>Custom opponents will need a custom Special Sequencer as a companion (please, don&#39;t ask why we need Special Sequencers and Opponents and why they couldn&#39;t just be the same thing). So in this case, the following code snippet shows how to create an opponent that is linked to its special sequencer:</p>
<pre><code class="lang-c#">public class MyBossOpponent : Part1BossOpponent
{
    public static readonly Opponent.Type ID = OpponentManager.Add(Plugin.PluginGuid, &quot;MyBossOpponent&quot;, MyCustomBattleSequencer.ID, typeof(MyBossOpponent)).Id;
}
</code></pre><p>Note that the third parameter in OpponentManager.Add is a string, and that string is the same ID that was set in the code snippet for the special sequencer in the previous example.</p>
<p>If you have a specific blueprint that you want your opponent type to use, using the example for setting up the blueprint from before, then in in the <code>Awake</code>, <code>Start</code>, or <code>IntroSequence</code> override you can set it there if you didn&#39;t already set it in the EncounterData object:</p>
<pre><code class="lang-c#">public override IEnumerator IntroSequence(EncounterData encounter)
{
    encounterData.Blueprint = EncounterManager.AllEncountersCopy.Find(enc =&gt; enc.name == &quot;TurnPlan_2&quot;);
        List&lt;List&lt;CardInfo&gt;&gt; plan = EncounterBuilder.BuildOpponentTurnPlan(encounterData.Blueprint, difficulty, removeLockedCards);
    base.ReplaceAndAppendTurnPlan(plan);
    yield return QueueNewCards();
        yield return base.IntroSequence(encounter);
}
</code></pre><h2 id="ai">AI</h2>
<hr>
<p>In most cases, you will probably not need to create a custom AI. By default, the game will look at the cards that the computer is preparing to play and then use brute force to test every possible slot that the computer could queue those slots for. It will then simulate a full turn of the game for each of those positions and determine which one has the best outcome. There are very few exceptions to this rule.</p>
<p>As an example, one exception is the Prospector boss fight, where the computer will always play the Pack Mule in slot 0 and a coyote in slot 1. It&#39;s important that these cards always get played in this position, so the game has a custom AI that detects this part of the game and overrides the default AI.</p>
<p>If you want to use a custom AI, you need to build a class that inherits from DiskCardGame.AI and overrides the virtual method SelectSlotsForCards. That one method is where you implement your custom AI logic.</p>
<p>To register a new AI with the game, use the AIManager class in the API, and keep a reference to the string ID that you receive back:</p>
<pre><code class="lang-c#">public class MyCustomAI : AI
{
    public static readonly string ID = AIManager.Add(Plugin.PluginGuid, &quot;MyAI&quot;, typeof(MyCustomAI)).Id;

    public override List&lt;CardSlot&gt; SelectSlotsForCards(List&lt;CardInfo&gt; cards, CardSlot[] slots)
    {
        // Do stuff here
    }
}
</code></pre><p>To actually <em>use</em> your new AI, you need to set it inside of a special sequencer; specifically in the BuildCustomEncounter method:</p>
<pre><code class="lang-c#">public class MyCustomBattleSequencer : Part1BossBattleSequencer
{
    public override EncounterData BuildCustomEncounter(CardBattleNodeData nodeData)
    {
        EncounterData data = base.BuildCustomEncounter(nodeData);
        data.aiId = MyCustomAI.ID;
        return data;
    }
}
</code></pre><h2 id="boss-masks">Boss Masks</h2>
<hr>
<p>When creating a custom boss opponent, you may feel the urge to change what mask Leshy adorns during the fight.
Fortunately, the API&#39;s got you covered.</p>
<h3 id="changing-an-existing-mask">Changing an Existing Mask</h3>
<p>This allows you to change a mask already added to Inscyrption. Can be any Vanilla masks or one someone else has added.</p>
<pre><code class="lang-csharp">MaskManager.Override(&quot;guid&quot;, &quot;nameOfNewMask&quot;, LeshyAnimationController.Mask.Angler, &quot;pathToTexture&quot;);
</code></pre><p>This example shows changing the mask the Angler uses to have a custom texture we are using.</p>
<p>NOTE: This also changes the model so we can use a texture without the fuss of UV mapping the Anglers actual mask.
If you still want to use the Anglers model then use <code>.SetModelType(MaskManager.ModelType.Angler)</code></p>
<h3 id="adding-a-random-mask">Adding a Random Mask</h3>
<p>If you want to add a new mask that will be randomly chosen when Leshy goes to put on a mask use this.</p>
<pre><code class="lang-csharp">MaskManager.AddRandom(&quot;guid&quot;, &quot;nameOfNewMask&quot;, LeshyAnimationController.Mask.Prospector, &quot;pathToTexture&quot;);
</code></pre><p>This example shows adding a new mask that when going to the Prospector boss fight, Leshy will choose between the default Prospector mask and this new one.</p>
<p>You can add as many random masks as you want. There is no limit.</p>
<h3 id="adding-a-custom-mask">Adding a Custom Mask</h3>
<pre><code class="lang-csharp">MaskManager.Add(&quot;guid&quot;, &quot;nameOfNewMask&quot;, &quot;pathToTexture&quot;);
</code></pre><h3 id="adding-a-custom-model">Adding a Custom Model</h3>
<pre><code class="lang-csharp">ResourceLookup resourceLookup = new ResourceLookup();
resourceLookup.FromAssetBundle(&quot;pathToAssetBundle&quot;, &quot;prefabNameInsideBundle&quot;);
MaskManager.ModelType modelType = MaskManager.RegisterPrefab(&quot;guid&quot;, &quot;nameOfModel&quot;, resourceLookup);

var mask = MaskManager.Add(&quot;guid&quot;, &quot;nameOfMask&quot;);
mask.SetModelType(modelType);
</code></pre><h3 id="putting-on-a-mask">Putting on a Mask</h3>
<p>This will tell Leshy to push a mask on his face.</p>
<p>Useful for when you have your own boss sequence and you want to tell Leshy to put on your new mask!</p>
<pre><code class="lang-csharp">LeshyAnimationController.Instance.PutOnMask(LeshyAnimationController.Mask.Woodcarver, false);
</code></pre><h3 id="adding-custom-mask-behaviour">Adding Custom Mask Behaviour</h3>
<pre><code class="lang-csharp">public class Plugin : BaseUnityPlugin
{
    private void Awake()
    {
        MyCustomMask.Setup();        
    }
}
</code></pre><pre><code class="lang-csharp">public class MyCustomMask : MaskBehaviour
{
    public static LeshyAnimationController.Mask ID;

    public static void Setup()
    {
        var mask = MaskManager.Add(&quot;guid&quot;, &quot;nameOfNewMask&quot;, &quot;pathToTexture&quot;);
        mask.SetMaskBehaviour(typeof(MyCustomMask));
        ID = mask.ID;
    }
}
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="toggle-mode">
                <div class="icon">
                  <i aria-hidden="true">☀</i>
                </div>
                <label class="switch">
                  <input type="checkbox" id="switch-style">
                  <span class="slider round"></span>
                </label>
                <div class="icon">
                  <i aria-hidden="true">☾</i>
                </div>
              </div>
          
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
              
              <span>Generated by <strong>DocFX</strong></span>
            </div>
            <div class="toggle-mode pull-right visible-sm visible-xs">
              <div class="icon">
                <i aria-hidden="true">☀</i>
              </div>
              <label class="switch">
                <input type="checkbox" id="switch-style-m">
                <span class="slider round"></span>
              </label>
              <div class="icon">
                <i aria-hidden="true">☾</i>
              </div>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="../styles/toggle-theme.js"></script>
      </footer>    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
