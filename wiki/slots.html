<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Slot Modifications | InscryptionAPI </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Slot Modifications | InscryptionAPI ">
    <meta name="generator" content="docfx 2.59.0.0">
    
    <link rel="shortcut icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    <meta property="docfx:newtab" content="true">
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo.svg" alt="Inscryption Modding API">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="slot-modifications">Slot Modifications</h2>

<hr>
<p>The API now supports adding abilities and behaviors to card slots! These &quot;slot modifications&quot; are implemented very similarly to how you would implement sigils; you just need to code your modification logic as a subclass of <code>SlotModificationBehaviour</code> and make some custom artwork for what the new slot should look like.</p>
<h3 id="creating-slot-textures-and-sprites">Creating Slot Textures and Sprites</h3>
<p>Slot textures in 3D game zones are 154x226 pixels. You can either create a single slot texture for all zones, or create a separate texture for Leshy, P03, Grimora, and Magnificus.</p>
<p>Slot textures in 2D game zones are 44x58 pixels. There are five different themes for 2D battles (Nature, Tech, Undead, Wizard, and Finale), and slots change their appearance when you hover over them. Additionally, you may wish to have a different texture for the opponent than for the player (this is most likely to happen in the Nature theme as the claw icons faces down for the opponent and up for the player). In order to accomodate all of these different combinations, you are given a number of options when supplying textures to the <code>SlotModificationManager</code>:</p>
<ul>
<li>If you provide a 44x58 texture, the manager will create 10 variations of it automatically, recoloring it to fit the color (standard and highlighted/mouse-over) of each theme. All black and transparent pixels will be left as-is; all remaining pixels will be replaced with the appropriate color for the theme.</li>
<li>If you provide a 220x116 texture, the manager will slice this into 10 sprites - two rows, five columns. The first row will be the standard slot, and the second row will be the slot when hovering. In order, the columns will be Nature, Undead, Tech, Wizard, Finale.</li>
<li>If you provide a 220x232 texture, it behaves the same as above, except rows 3 and 4 are used for the opponent slots.</li>
</ul>
<h3 id="creating-a-slot-modification-behaviour">Creating a Slot Modification Behaviour</h3>
<p>You need to create a subclass of <code>SlotModificationBehaviour</code> to implement your slot&#39;s logic. You can also add on API interface triggers as part of this.</p>
<p>For example, this slot deals one damage to the card in it every end step:</p>
<pre><code class="lang-csharp">class SharpSlotBehaviour : SlotModificationBehaviour
{
    public override bool RespondsToTurnEnd(bool playerTurnEnd) =&gt; playerTurnEnd == Slot.IsPlayerSlot;

    public override IEnumerator OnTurnEnd(bool playerTurnEnd)
    {
        if (Slot.Card != null)
            yield return Slot.Card.TakeDamage(1, null);
    }
}
</code></pre><p>...and this slot adds 1 passive attack to the card in it...</p>
<pre><code class="lang-csharp">public class BuffSlot : SlotModificationBehaviour, IPassiveAttackBuff
{
    public int GetPassiveAttackBuff(PlayableCard target)
    {
        return Slot.Card == target ? 1 : 0;
    }
}
</code></pre><p>If you want your slot to grant another ability to the card in it, there&#39;s a helper for that: <code>SlotModificationGainAbilityBehaviour</code>:</p>
<pre><code class="lang-csharp">public class SharpQuillsSlot : SlotModificationGainAbilityBehaviour
{ 
    protected override Ability AbilityToGain =&gt; Ability.Sharp;
}
</code></pre><p>If you want your slot to take an action when it is first created or when it is removed, override <code>Setup</code> and <code>Cleanup</code> respectively. Often these could be used to add additional visual flair to your slot:</p>
<pre><code class="lang-csharp">public class AwesomeLookingSlot : SlotModificationBehaviour
{
    public override IEnumerator Setup()
    {
        yield return ShowSomeAwesomeVisuals();
    }

    public override IEnumerator Cleanup(SlotModificationManager.ModificationType replacement)
    {
        yield return DestroyMyAwesomeVisuals();
    }
}
</code></pre><h3 id="registering-a-slot-modification">Registering A Slot Modification</h3>
<p>The pattern is very similar to creating a new sigil; you need to call the <code>SlotModificationManager</code> to register your slot mod and then store the result you get back:</p>
<pre><code class="lang-csharp">public static readonly SlotModificationManager.ModificationType SharpQuillsSlot = SlotModificationManager.New(
    &quot;MyPluginGuid&quot;,
    &quot;SharpQuillsSlot&quot;,
    typeof(SharpQuillsSlot),
    TextureHelper.GetImageAsTexture(&quot;my_3d_card_slot.png&quot;, typeof(SharpQuillsSlot).Assembly),
    TextureHelper.GetImageAsTexture(&quot;my_2d_card_slot.png&quot;, typeof(SharpQuillsSlot).Assembly)
)
</code></pre><h3 id="activating-a-slot-modification">Activating A Slot Modification</h3>
<p>You&#39;ll almost always end up creating a slot modification as part of another sigil. Here, we have an example custom sigil that activates the slot when the card dies. You do this by using the extension method <code>SetSlotModification</code>.</p>
<pre><code class="lang-csharp">public class LeaveSharpBehindBehaviour : AbilityBehaviour
{
    public override bool RespondsToPreDeathAnimation(bool wasSacrifice) =&gt; Card.OnBoard;

    public override IEnumerator OnPreDeathAnimation(bool wasSacrifice)
    {
        // SharpQuillSlot is the ID that was returned by the SlotModificationManager
        yield return Card.Slot.SetSlotModification(SharpQuillsSlot);
    }
}
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="toggle-mode">
                <div class="icon">
                  <i aria-hidden="true">☀</i>
                </div>
                <label class="switch">
                  <input type="checkbox" id="switch-style">
                  <span class="slider round"></span>
                </label>
                <div class="icon">
                  <i aria-hidden="true">☾</i>
                </div>
              </div>
          
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
              
              <span>Generated by <strong>DocFX</strong></span>
            </div>
            <div class="toggle-mode pull-right visible-sm visible-xs">
              <div class="icon">
                <i aria-hidden="true">☀</i>
              </div>
              <label class="switch">
                <input type="checkbox" id="switch-style-m">
                <span class="slider round"></span>
              </label>
              <div class="icon">
                <i aria-hidden="true">☾</i>
              </div>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="../styles/toggle-theme.js"></script>
      </footer>    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
