<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Adding Custom Sections | InscryptionAPI </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Adding Custom Sections | InscryptionAPI ">
    <meta name="generator" content="docfx 2.59.0.0">
    
    <link rel="shortcut icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    <meta property="docfx:newtab" content="true">
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo.svg" alt="Inscryption Modding API">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="adding-custom-sections">Adding Custom Sections</h2>

<p>In some rare cases, you may want to add a whole new section of pages to the rulebook.
This can get pretty technical, so an example has been provided below on how best to set up your new rulebook section.</p>
<p>Once everything is set up, call RuleBookManager.New() with the required arguments and you&#39;re good to go.</p>
<pre><code class="lang-c#">RuleBookManager.New(
    MyPluginGuid, // a unique identifier for your mod
    PageRangeType.Boons, // the PageRangeType we want to inherit our page style from
    &quot;Mod Tribes&quot;, // the subsection name that appears at the end of the header
    GetInsertPosition, // a Function that determines where in the Rulebook to insert our custom section
    CreatePages, // the Function to create the pages that will be in our custom section
    headerPrefix: null, // optional argument, if left null one will be created for you
    getStartingNumberFunc: GetStartingNumber, // optional argument, if left null the starting number will be 1
    fillPageAction: FillPage // also optional, but if you want to display custom names, descriptions, etc you will need to set this
    );
</code></pre><p>This will return a FullRuleBookRangeInfo object representing your custom section if you want to modify it further.</p>
<p>Note you can pass in STATIC methods as Func and Action arguments when creating your custom rulebook range.</p>
<pre><code class="lang-c#">// ---IMPORTANT---
// the return value and parameters MUST match the parameters and return value of the Func

// what part of the rulebook this section should be inserted into
// since we&#39;re using the BoonPage style, this will insert our pages AFTER the Boons section of the rulebook
private static int GetInsertPosition(PageRangeInfo pageRangeInfo, List&lt;RuleBookPageInfo&gt; pages)
{
    return pages.FindLastIndex(rbi =&gt; rbi.pagePrefab == pageRangeInfo.rangePrefab) + 1;
}

private static List&lt;RuleBookPageInfo&gt; CreatePages(RuleBookInfo instance, PageRangeInfo currentRange, AbilityMetaCategory metaCategory)
{
    // in this example, we&#39;re adding a rulebook section for custom Tribes
    // foreach custom tribe that exists, we create a rulebook page then set the pageId to the tribe enum so we can use it later
    List&lt;TribeManager.TribeInfo&gt; allTribes = TribeManager.NewTribes.ToList();
    List&lt;RuleBookPageInfo&gt; retval = new();
    foreach (var tribe in allTribes)
    {
        RuleBookPageInfo page = new();
        page.pageId = tribe.tribe.ToString();
        retval.Add(page);
    }
    return retval;
}

private static int GetStartingNumber(List&lt;RuleBookPageInfo&gt; addedPages)
{
    return (int)Tribe.NUM_TRIBES; // since we&#39;re doing mod Tribes only, our page numbers will start at 7.
}

private static void FillPage(RuleBookPage page, string pageId, object[] otherArgs)
{
    // in order to modify the page description you MUST convert it to the intended page type as shown
    if (page is BoonPage boonPage &amp;&amp; int.TryParse(pageId, out int id))
    {
        TribeManager.TribeInfo tribe = TribeManager.NewTribes.FirstOrDefault(x =&gt; x.tribe == (Tribe)id);
        if (tribe != null)
        {
            // We use the internal name of each tribe as our page title
            // we also replace all instances of the word &#39;tribe&#39; in the name if they exist so it reads more naturally
            boonPage.nameTextMesh.text = Localization.Translate(tribe.name.ToLowerInvariant().Replace(&quot;tribe&quot;, &quot;&quot;));

            // if we wanted our pages to describe each Tribe, we would set those descriptions here
            boonPage.descriptionTextMesh.text = &quot;&quot;;

            // boon pages have 2 renderers (one on the left and one on the right side of the page)
            // in this example, we want them to both have the same texture
            boonPage.iconRenderer.material.mainTexture = boonPage.iconRenderer2.material.mainTexture = tribe.icon.texture;
        }
    }
}
</code></pre><h2 id="useful-information-on-rulebookpages">Useful Information on RuleBookPages</h2>
<p>When filling the content of your custom pages, it&#39;s important to understand the page style and what fields you&#39;ll have access to.</p>
<p>When your custom section&#39;s FillPage() method is called, only certain parts of the current RuleBookPageInfo will be provided to you.
If you plan on using information beyond the pageId when filling your pages, you need to know the order of objects in the array so you can access them correctly.</p>
<h3 id="abilitypage">AbilityPage</h3>
<p>Ability icon texture is placed on the left of the page</p>
<p>otherArgs: headerText, ability, fillerAbilityIds</p>
<p>Class Fields:</p>
<ul>
<li>AbilityPageContent <em>mainAbilityGroup</em></li>
</ul>
<h3 id="staticonpage">StatIconPage</h3>
<p>Stat Icon texture is placed on the left of the icon&#39;s name</p>
<p>otherArgs: headerText</p>
<p>Class Fields:</p>
<ul>
<li>Renderer <em>iconRenderer</em></li>
<li>TextMeshPro <em>nameTextMesh</em></li>
<li>TextMeshPro <em>descriptionTextMesh</em></li>
</ul>
<h3 id="boonpage">BoonPage</h3>
<p>Boon textures are placed on the left and right of the page (right icon is flipped horizontally)</p>
<p>otherArgs: headerText, boon</p>
<p>Class Fields:</p>
<ul>
<li>Renderer <em>iconRenderer</em></li>
<li>Renderer <em>iconRenderer2</em></li>
<li>TextMeshPro <em>nameTextMesh</em></li>
<li>TextMeshPro <em>descriptionTextMesh</em></li>
</ul>
<h3 id="itempage">ItemPage</h3>
<p>Item&#39;s rulebookSprite is placed on the left of the page</p>
<p>otherArgs: headerText</p>
<p>Class Fields:</p>
<ul>
<li>Renderer <em>iconRenderer</em></li>
<li>TextMeshPro <em>nameTextMesh</em></li>
<li>TextMeshPro <em>descriptionTextMesh</em></li>
<li>Transform <em>itemModelParent</em></li>
<li>GameObject <em>itemModel</em></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="toggle-mode">
                <div class="icon">
                  <i aria-hidden="true">☀</i>
                </div>
                <label class="switch">
                  <input type="checkbox" id="switch-style">
                  <span class="slider round"></span>
                </label>
                <div class="icon">
                  <i aria-hidden="true">☾</i>
                </div>
              </div>
          
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <h5>In This Article</h5>
              <div></div>
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div class="pull-left">
              
              <span>Generated by <strong>DocFX</strong></span>
            </div>
            <div class="toggle-mode pull-right visible-sm visible-xs">
              <div class="icon">
                <i aria-hidden="true">☀</i>
              </div>
              <label class="switch">
                <input type="checkbox" id="switch-style-m">
                <span class="slider round"></span>
              </label>
              <div class="icon">
                <i aria-hidden="true">☾</i>
              </div>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="../styles/toggle-theme.js"></script>
      </footer>    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
